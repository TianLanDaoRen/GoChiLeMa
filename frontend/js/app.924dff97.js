(function (t) { function e(e) { for (var i, s, o = e[0], c = e[1], l = e[2], d = 0, m = []; d < o.length; d++)s = o[d], Object.prototype.hasOwnProperty.call(n, s) && n[s] && m.push(n[s][0]), n[s] = 0; for (i in c) Object.prototype.hasOwnProperty.call(c, i) && (t[i] = c[i]); u && u(e); while (m.length) m.shift()(); return a.push.apply(a, l || []), r() } function r() { for (var t, e = 0; e < a.length; e++) { for (var r = a[e], i = !0, o = 1; o < r.length; o++) { var c = r[o]; 0 !== n[c] && (i = !1) } i && (a.splice(e--, 1), t = s(s.s = r[0])) } return t } var i = {}, n = { app: 0 }, a = []; function s(e) { if (i[e]) return i[e].exports; var r = i[e] = { i: e, l: !1, exports: {} }; return t[e].call(r.exports, r, r.exports, s), r.l = !0, r.exports } s.m = t, s.c = i, s.d = function (t, e, r) { s.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: r }) }, s.r = function (t) { "undefined" !== typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, s.t = function (t, e) { if (1 & e && (t = s(t)), 8 & e) return t; if (4 & e && "object" === typeof t && t && t.__esModule) return t; var r = Object.create(null); if (s.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var i in t) s.d(r, i, function (e) { return t[e] }.bind(null, i)); return r }, s.n = function (t) { var e = t && t.__esModule ? function () { return t["default"] } : function () { return t }; return s.d(e, "a", e), e }, s.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, s.p = ""; var o = window["webpackJsonp"] = window["webpackJsonp"] || [], c = o.push.bind(o); o.push = e, o = o.slice(); for (var l = 0; l < o.length; l++)e(o[l]); var u = c; a.push([0, "chunk-vendors"]), r() })({ 0: function (t, e, r) { t.exports = r("cd49") }, "0565": function (t, e, r) { "use strict"; (function (t) { var i = r("7327"), n = r("731b"), a = r("25f1"), s = r("507a"), o = r("73ec"), c = r("b7c7"); e["a"] = { name: "FileSelector", data() { return { task_all: 0, task_finished: 0, queue: new o["a"], parallel: !1 } }, computed: { progress_value() { return this.task_all ? this.task_finished / this.task_all * 100 : 0 }, progress_show() { return this.task_all !== this.task_finished } }, mounted() { window.Worker && "file:" !== window.location.protocol ? (console.log("Using Worker Pool"), this.queue = Object(i["a"])(() => Object(n["a"])(new a["a"](t)), navigator.hardwareConcurrency || 1), this.parallel = !0) : console.log("Using Queue in Main Thread") }, methods: { progress_string() { return `${this.task_finished} / ${this.task_all}` }, async addFile(t) { this.task_all++, this.queue.queue(async (e = s["a"]) => { console.log("start handling", t.name); try { this.$emit("success", await e(t, await c["a"].getAll())) } catch (r) { console.error(r), this.$emit("error", r, t.name) } finally { this.task_finished++ } }) } } } }).call(this, r("2e83")) }, "0ba7": function (t, e, r) { "use strict"; r.d(e, "a", (function () { return s })); r("907a"), r("3c5d"); var i = r("9ab4"), n = r("cc74"), a = r("cb96"); function s(t, e, r, s) { return void 0 === s && (s = !0), Object(i["a"])(this, void 0, Promise, (function () { var o, c, l, u, d, m, f; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return o = r, s ? (l = Uint8Array.bind, [4, Object(n["c"])(t)]) : [3, 2]; case 1: c = new (l.apply(Uint8Array, [void 0, i.sent()])), o = Object(n["i"])(c, r), o !== r && (t = new Blob([c], { type: n["a"][o] })), i.label = 2; case 2: return [4, Object(a["parseBlob"])(t)]; case 3: return u = i.sent(), d = Object(n["f"])(e, u.common.title, String(u.common.artists || u.common.artist || "")), m = d.title, f = d.artist, [2, { title: m, artist: f, ext: o, album: u.common.album, picture: Object(n["d"])(u), file: URL.createObjectURL(t), blob: t, mime: n["a"][o] }] } })) })) } }, "0f92": function (t, e, r) { "use strict"; (function (t) { r.d(e, "a", (function () { return u })); var i = r("9ab4"), n = r("cb96"), a = r("acf9"), s = r.n(a), o = r("cc74"), c = r("97e5"), l = function (e) { return s.a.decode(new t(e || ""), "gbk") }; function u(t, e, r, a) { return Object(i["a"])(this, void 0, Promise, (function () { var s, c, u, b, h; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return [4, Object(n["parseBlob"])(t)]; case 1: for (c in s = i.sent(), s.native) s.native.hasOwnProperty(c) && s.native[c].some((function (t) { return "TCON" === t.id && "(12)" === t.value })) && (console.warn("try using gbk encoding to decode meta"), s.common.artist = "", s.common.artists ? s.common.artist = s.common.artists.map(l).join() : s.common.artist = l(s.common.artist), s.common.title = l(s.common.title), s.common.album = l(s.common.album)); if (a && "0" !== a) try { return [2, d(a, r, s, t)] } catch (p) { console.warn("在线获取曲目信息失败，回退到本地 meta 提取", p) } return u = Object(o["f"])(e, s.common.title, s.common.artist), u.artist = u.artist || "", b = Object(o["d"])(s), b ? [3, 3] : [4, m(u.title, u.artist, s.common.album)]; case 2: b = i.sent(), i.label = 3; case 3: return h = { title: u.title, artist: u.artist, album: s.common.album || "", imgUrl: b }, [4, f({ title: u.title, artists: u.artist.split(o["m"]), ext: r, imageURL: b, musicMeta: s, blob: t })]; case 4: return [2, (h.blob = i.sent(), h)] } })) })) } function d(t, e, r, n) { return Object(i["a"])(this, void 0, Promise, (function () { var a, s, o, l; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return [4, Object(c["d"])(t)]; case 1: return a = i.sent(), s = Object(c["b"])(a.track_info.album.pmid), o = a.track_info.singer.map((function (t) { return t.name })), l = { title: a.track_info.title, artist: o.join(","), album: a.track_info.album.name, imgUrl: s }, [4, f({ title: a.track_info.title, artists: o, ext: e, imageURL: s, musicMeta: r, blob: n })]; case 2: return [2, (l.blob = i.sent(), l)] } })) })) } function m(t, e, r) { return Object(i["a"])(this, void 0, Promise, (function () { var n, a; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return i.trys.push([0, 2, , 3]), [4, Object(c["c"])(t, e, r)]; case 1: return n = i.sent(), [2, Object(c["b"])(n.Id, n.Type)]; case 2: return a = i.sent(), console.warn(a), [3, 3]; case 3: return [2, ""] } })) })) } function f(e) { return Object(i["a"])(this, void 0, Promise, (function () { var r, n, a, s, c, l, u; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return i.trys.push([0, 3, , 4]), [4, Object(o["e"])(e.imageURL)]; case 1: return r = i.sent(), r || console.warn("获取图像失败"), n = { picture: null === r || void 0 === r ? void 0 : r.buffer, title: e.title, artists: e.artists }, c = (s = t).from, [4, e.blob.arrayBuffer()]; case 2: return a = c.apply(s, [i.sent()]), l = o["a"][e.ext] || o["a"].mp3, "mp3" === e.ext ? [2, new Blob([Object(o["l"])(a, n, e.musicMeta)], { type: l })] : "flac" === e.ext ? [2, new Blob([Object(o["k"])(a, n, e.musicMeta)], { type: l })] : (console.info("writing metadata for " + e.ext + " is not being supported for now"), [3, 4]); case 3: return u = i.sent(), console.warn("Error while appending cover image to file " + u), [3, 4]; case 4: return [2, e.blob] } })) })) } }).call(this, r("1c35").Buffer) }, 1: function (t, e) { }, 1708: function (t, e, r) { "use strict"; r("8c80") }, 2: function (t, e) { }, "2e83": function (t, e, r) { t.exports = r.p + "js/0.904a0cc2.worker.js" }, 3: function (t, e) { }, "321b": function (t, e, r) { "use strict"; (function (t) { var i = r("ab8f"), n = r("af85"), a = r("730d"), s = r("d4ec"), o = r("73ec"), c = r("cc74"), l = r("cb96"); e["a"] = { name: "Home", components: { FileSelector: i["a"], PreviewTable: n["a"], ConfigDialog: a["a"], EditDialog: s["a"] }, data() { return { showConfigDialog: !1, showEditDialog: !1, editing_data: { picture: "", title: "", artist: "", album: "", albumartist: "", genre: "" }, tableData: [], playing_url: "", playing_auto: !1, filename_policy: o["e"].ArtistAndTitle, instant_save: !1, FilenamePolicies: o["d"], dir: null } }, watch: { instant_save(t) { t && this.showDirectlySave() } }, methods: { async showSuccess(t) { this.instant_save ? (await this.saveFile(t), Object(o["f"])(t)) : (this.tableData.push(t), this.$notify.success({ title: "解锁成功", message: "成功解锁 " + t.title, duration: 3e3 })); { let e = [t.title, t.artist, t.album]; window._paq.push(["trackEvent", "Unlock", t.rawExt + "," + t.mime, JSON.stringify(e)]) } }, showFail(t, e) { console.error(t, e), this.$notify.error({ title: "出现问题", message: t + "，" + e + '，参考<a target="_blank" href="https://github.com/ix64/unlock-music/wiki/使用提示">使用提示</a>', dangerouslyUseHTMLString: !0, duration: 6e3 }), window._paq.push(["trackEvent", "Error", String(t), e]) }, changePlaying(t) { this.playing_url = t, this.playing_auto = !0 }, handleDeleteAll() { this.tableData.forEach(t => { Object(o["f"])(t) }), this.tableData = [] }, handleDecryptionConfig() { this.showConfigDialog = !0 }, handleDownloadAll() { let t = 0, e = setInterval(() => { t < this.tableData.length ? (this.saveFile(this.tableData[t]), t++) : clearInterval(e) }, 300) }, async handleEdit(e) { this.showEditDialog = !1, URL.revokeObjectURL(this.editing_data.file), e.picture && (URL.revokeObjectURL(this.editing_data.picture), this.editing_data.picture = URL.createObjectURL(e.picture)), this.editing_data.title = e.title, this.editing_data.artist = e.artist, this.editing_data.album = e.album; let r = !0, i = "成功修改 " + this.editing_data.title; try { var n; const a = await Object(l["parseBlob"])(new Blob([this.editing_data.blob], { type: d })); let s = void 0; "" !== this.editing_data.picture && (s = await Object(c["e"])(this.editing_data.picture), s || console.warn("获取图像失败", this.editing_data.picture)); const o = { picture: null === (n = s) || void 0 === n ? void 0 : n.buffer, title: e.title, artists: e.artist.split(c["m"]), album: e.album, albumartist: e.albumartist, genre: e.genre.split(c["m"]) }, u = t.from(await this.editing_data.blob.arrayBuffer()), d = c["a"][this.editing_data.ext] || c["a"].mp3; "mp3" === this.editing_data.ext ? this.editing_data.blob = new Blob([Object(c["h"])(u, o, a)], { type: d }) : "flac" === this.editing_data.ext ? this.editing_data.blob = new Blob([Object(c["g"])(u, o, a)], { type: d }) : (r = void 0, i = this.editing_data.ext + "类型文件暂时不支持修改音乐标签") } catch (a) { r = !1, i = "修改" + this.editing_data.title + "未能完成。在写入新的元数据时发生错误：" + a } this.editing_data.file = URL.createObjectURL(this.editing_data.blob), !0 === r ? this.$notify.success({ title: "修改成功", message: i, duration: 3e3 }) : !1 === r ? this.$notify.error({ title: "修改失败", message: i, duration: 3e3 }) : this.$notify.warning({ title: "修改取消", message: i, duration: 3e3 }) }, async editFile(t) { var e; this.editing_data = t; const r = await Object(l["parseBlob"])(this.editing_data.blob); this.editing_data.albumartist = r.common.albumartist || "", this.editing_data.genre = (null === (e = r.common.genre) || void 0 === e ? void 0 : e.toString()) || "", this.showEditDialog = !0 }, async saveFile(t) { this.dir ? (await Object(o["b"])(t, this.filename_policy, this.dir), this.$notify({ title: "保存成功", message: t.title, position: "top-left", type: "success", duration: 3e3 })) : Object(o["c"])(t, this.filename_policy) }, async showDirectlySave() { if (window.showDirectoryPicker) { try { await this.$confirm("您的浏览器支持文件直接保存到磁盘，是否使用？", "新特性提示", { confirmButtonText: "使用", cancelButtonText: "不使用", type: "warning", center: !0 }) } catch (t) { return void console.log(t) } try { this.dir = await window.showDirectoryPicker(); const t = "__unlock_music_write_test.txt"; await this.dir.getFileHandle(t, { create: !0 }), await this.dir.removeEntry(t) } catch (t) { console.error(t) } } } } } }).call(this, r("1c35").Buffer) }, 4: function (t, e) { }, 5: function (t, e) { }, "507a": function (t, e, r) { "use strict"; r.d(e, "a", (function () { return K })); var i = r("9ab4"), n = r("9b2d"), a = r("6d95"), s = (r("907a"), r("3c5d"), r("cc74")), o = r("cb96"); function c(t, e, r) { return Object(i["a"])(this, void 0, Promise, (function () { var n, a, c, l, u, d, m, f, b; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return a = Uint8Array.bind, [4, Object(s["c"])(t)]; case 1: for (n = new (a.apply(Uint8Array, [void 0, i.sent()])), c = n.length, l = 0; l < c; l++)n[l] ^= 163; return u = Object(s["i"])(n, r), u !== r && (t = new Blob([n], { type: s["a"][u] })), [4, Object(o["parseBlob"])(t)]; case 2: return d = i.sent(), m = Object(s["f"])(e, d.common.title, String(d.common.artists || d.common.artist || "")), f = m.title, b = m.artist, [2, { title: f, artist: b, ext: u, album: d.common.album, picture: Object(s["d"])(d), file: URL.createObjectURL(t), blob: t, mime: s["a"][u] }] } })) })) } var l = r("0ba7"), u = [105, 102, 109, 116], d = [254, 254, 254, 254], m = { " WAV": ".wav", FLAC: ".flac", " MP3": ".mp3", " A4M": ".m4a" }; function f(t, e, r) { return Object(i["a"])(this, void 0, Promise, (function () { var n, a, c, f, b, h, p, v, g, w, y, j, O, _, x; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return a = Uint8Array.bind, [4, Object(s["c"])(t)]; case 1: if (n = new (a.apply(Uint8Array, [void 0, i.sent()])), Object(s["b"])(n, u) && Object(s["b"])(n.slice(8, 12), d)) return [3, 4]; if ("xm" !== r) return [3, 2]; throw Error("此xm文件已损坏"); case 2: return [4, Object(l["a"])(t, e, r, !0)]; case 3: return [2, i.sent()]; case 4: if (c = (new TextDecoder).decode(n.slice(4, 8)), !m.hasOwnProperty(c)) throw Error("未知的.xm文件类型"); for (f = n[15], b = n[12] | n[13] << 8 | n[14] << 16, h = n.slice(16), p = h.length, v = b; v < p; ++v)h[v] = h[v] - f ^ 255; return g = m[c], w = s["a"][g], y = new Blob([h], { type: w }), [4, Object(o["parseBlob"])(y)]; case 5: return j = i.sent(), "wav" === g && (console.info(j.common), j.common.album = "", j.common.artist = "", j.common.title = ""), O = Object(s["f"])(e, j.common.title, String(j.common.artists || j.common.artist || ""), -1 === e.indexOf("_") ? "-" : "_"), _ = O.title, x = O.artist, [2, { title: _, artist: x, ext: g, mime: w, album: j.common.album, picture: Object(s["d"])(j), file: URL.createObjectURL(y), blob: y, rawExt: "xm" }] } })) })) } var b = r("656c"), h = r.n(b); function p(t) { var e = 0; t.forEach((function (t) { e += t.length })); var r = new Uint8Array(e), i = 0; return t.forEach((function (t) { r.set(t, i), i += t.length })), r } var v = 2097152; function g(t, e) { return Object(i["a"])(this, void 0, Promise, (function () { var r, n, a, s, o, c, l, u, d, m, f; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: r = { success: !1, data: new Uint8Array, songId: 0, error: "" }, i.label = 1; case 1: return i.trys.push([1, 3, , 4]), [4, h()()]; case 2: return n = i.sent(), [3, 4]; case 3: return a = i.sent(), r.error = (null === a || void 0 === a ? void 0 : a.message) || "wasm 加载失败", [2, r]; case 4: if (!n) return r.error = "wasm 加载失败", [2, r]; if (s = new Uint8Array(t), o = n._malloc(v), n.writeArrayToMemory(s.slice(-v), o), e = "." + e, c = n.preDec(o, v, e), -1 == c) return r.error = n.getErr(), [2, r]; r.songId = n.getSongId(), r.songId = "0" == r.songId ? 0 : r.songId, l = [], u = 0, d = s.length - c; while (d > 0) m = Math.min(d, v), f = new Uint8Array(s.slice(u, u + m)), n.writeArrayToMemory(f, o), l.push(n.HEAPU8.slice(o, o + n.decBlob(o, m, u))), u += m, d -= m; return n._free(o), r.data = p(l), r.success = !0, [2, r] } })) })) } var w = r("0f92"), y = { mgg: { ext: "ogg", version: 2 }, mgg0: { ext: "ogg", version: 2 }, mggl: { ext: "ogg", version: 2 }, mgg1: { ext: "ogg", version: 2 }, mflac: { ext: "flac", version: 2 }, mflac0: { ext: "flac", version: 2 }, mmp4: { ext: "mp4", version: 2 }, qmcflac: { ext: "flac", version: 2 }, qmcogg: { ext: "ogg", version: 2 }, qmc0: { ext: "mp3", version: 2 }, qmc2: { ext: "ogg", version: 2 }, qmc3: { ext: "mp3", version: 2 }, qmc4: { ext: "ogg", version: 2 }, qmc6: { ext: "ogg", version: 2 }, qmc8: { ext: "ogg", version: 2 }, bkcmp3: { ext: "mp3", version: 1 }, bkcm4a: { ext: "m4a", version: 1 }, bkcflac: { ext: "flac", version: 1 }, bkcwav: { ext: "wav", version: 1 }, bkcape: { ext: "ape", version: 1 }, bkcogg: { ext: "ogg", version: 1 }, bkcwma: { ext: "wma", version: 1 }, tkm: { ext: "m4a", version: 1 }, "666c6163": { ext: "flac", version: 1 }, "6d7033": { ext: "mp3", version: 1 }, "6f6767": { ext: "ogg", version: 1 }, "6d3461": { ext: "m4a", version: 1 }, 776176: { ext: "wav", version: 1 } }; function j(t, e, r) { return Object(i["a"])(this, void 0, Promise, (function () { var n, a, o, c, l, u, d, m, f, b, h, p, v, j; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: if (!(r in y)) throw "Qmc cannot handle type: ".concat(r); return n = y[r], a = n.version, [4, Object(s["c"])(t)]; case 1: return o = i.sent(), c = new Uint8Array, 2 === a && globalThis.WebAssembly ? [4, g(o, r)] : [3, 3]; case 2: if (u = i.sent(), !u.success) throw new Error(u.error || "(unknown error)"); c = u.data, l = u.songId, console.log("qmc wasm decoder suceeded"), i.label = 3; case 3: return d = Object(s["i"])(c, n.ext), m = s["a"][d], [4, Object(w["a"])(new Blob([c], { type: m }), e, d, l)]; case 4: return f = i.sent(), b = f.album, h = f.artist, p = f.imgUrl, v = f.blob, j = f.title, [2, { title: j, artist: h, ext: d, album: b, picture: p, file: URL.createObjectURL(v), blob: v, mime: m }] } })) })) } function O(t, e, r) { return Object(i["a"])(this, void 0, Promise, (function () { var n, a, c, l, u, d, m, f, b, h; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return [4, Object(s["c"])(t)]; case 1: return n = i.sent(), a = new Uint8Array, globalThis.WebAssembly ? (console.log("qmc: using wasm decoder"), [4, g(n, r)]) : [3, 3]; case 2: if (c = i.sent(), !c.success) throw new Error(c.error || "(unknown error)"); a = c.data, console.log("qmc wasm decoder suceeded"), i.label = 3; case 3: if (l = Object(s["i"])(a, ""), u = Object(s["j"])(e), "" === l && "mp3" !== u.ext) { if (u.ext in y) return d = new Blob([a], { type: "application/octet-stream" }), [2, j(d, u.name, u.ext)]; throw "不支持的QQ音乐缓存格式" } return d = new Blob([a], { type: s["a"][l] }), [4, Object(o["parseBlob"])(d)]; case 4: return m = i.sent(), f = Object(s["f"])(e, m.common.title, String(m.common.artists || m.common.artist || "")), b = f.title, h = f.artist, [2, { title: b, artist: h, ext: l, album: m.common.album, picture: Object(s["d"])(m), file: URL.createObjectURL(d), blob: d, mime: s["a"][l] }] } })) })) } var _ = r("8866"), x = r.n(_), k = 2097152; function A(t, e) { return Object(i["a"])(this, void 0, Promise, (function () { var r, n, a, s, o, c, l, u, d, m, f; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: r = { success: !1, data: new Uint8Array, error: "" }, i.label = 1; case 1: return i.trys.push([1, 3, , 4]), [4, x()()]; case 2: return n = i.sent(), [3, 4]; case 3: return a = i.sent(), r.error = (null === a || void 0 === a ? void 0 : a.message) || "wasm 加载失败", [2, r]; case 4: if (!n) return r.error = "wasm 加载失败", [2, r]; s = new Uint8Array(t), o = n._malloc(k), n.writeArrayToMemory(s.slice(0, k), o), c = n.preDec(o, k, e), console.log(c), s = s.slice(c), l = [], u = 0, d = s.length; while (d > 0) m = Math.min(d, k), f = new Uint8Array(s.slice(u, u + m)), n.writeArrayToMemory(f, o), n.decBlob(o, m, u), l.push(n.HEAPU8.slice(o, o + m)), u += m, d -= m; return n._free(o), r.data = p(l), r.success = !0, [2, r] } })) })) } var U = [5, 40, 188, 150, 233, 228, 90, 67, 145, 170, 189, 208, 122, 245, 54, 49], T = [124, 213, 50, 235, 134, 2, 127, 75, 168, 175, 166, 142, 15, 255, 153, 20]; function P(t, e, r) { return Object(i["a"])(this, void 0, Promise, (function () { var n, a, c, l, u, d, m, f, b, h; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return [4, Object(s["c"])(t)]; case 1: if (n = i.sent(), "vpr" === r) { if (!Object(s["b"])(new Uint8Array(n), U)) throw Error("Not a valid vpr file!") } else if (!Object(s["b"])(new Uint8Array(n), T)) throw Error("Not a valid kgm(a) file!"); return a = new Uint8Array, globalThis.WebAssembly ? [4, A(n, r)] : [3, 3]; case 2: if (c = i.sent(), !c.success) throw new Error(c.error || "(unknown error)"); a = c.data, console.log("kgm wasm decoder suceeded"), i.label = 3; case 3: return l = Object(s["i"])(a), u = s["a"][l], d = new Blob([a], { type: u }), [4, Object(o["parseBlob"])(d)]; case 4: return m = i.sent(), f = Object(s["f"])(e, m.common.title, String(m.common.artists || m.common.artist || "")), b = f.title, h = f.artist, [2, { album: m.common.album, picture: Object(s["d"])(m), file: URL.createObjectURL(d), blob: d, ext: l, mime: u, title: b, artist: h }] } })) })) } var E = [121, 101, 101, 108, 105, 111, 110, 45, 107, 117, 119, 111, 45, 116, 109, 101], D = [121, 101, 101, 108, 105, 111, 110, 45, 107, 117, 119, 111, 0, 0, 0, 0], L = "MoOtOiTvINGwd2E6n0E1i7L5t2IoOoNk"; function S(t, e, r) { return Object(i["a"])(this, void 0, Promise, (function () { var r, n, a, c, u, d, m, f, b, h, p, v, g, w; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return n = Uint8Array.bind, [4, Object(s["c"])(t)]; case 1: return r = new (n.apply(Uint8Array, [void 0, i.sent()])), Object(s["b"])(r, E) || Object(s["b"])(r, D) ? [3, 4] : "aac" !== Object(s["i"])(r) ? [3, 3] : [4, Object(l["a"])(t, e, "aac", !1)]; case 2: return [2, i.sent()]; case 3: throw Error("not a valid kwm file"); case 4: for (a = r.slice(24, 32), c = F(a), u = r.slice(1024), d = u.length, m = 0; m < d; ++m)u[m] ^= c[m % 32]; return f = Object(s["i"])(u), b = s["a"][f], h = new Blob([u], { type: b }), [4, Object(o["parseBlob"])(h)]; case 5: return p = i.sent(), v = Object(s["f"])(e, p.common.title, String(p.common.artists || p.common.artist || "")), g = v.title, w = v.artist, [2, { album: p.common.album, picture: Object(s["d"])(p), file: URL.createObjectURL(h), blob: h, mime: b, title: g, artist: w, ext: f }] } })) })) } function F(t) { for (var e = new DataView(t.buffer), r = e.getBigUint64(0, !0).toString(), i = B(r), n = new Uint8Array(32), a = 0; a < 32; a++)n[a] = L.charCodeAt(a) ^ i.charCodeAt(a); return n } function B(t) { var e = t.length, r = t; return e > 32 ? r = t.slice(0, 32) : e < 32 && (r = t.padEnd(32, t)), r } var R = [0, 0, 0, 32, 102, 116, 121, 112]; function I(t, e) { return Object(i["a"])(this, void 0, Promise, (function () { var r, n, a, o; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return n = Uint8Array.bind, [4, Object(s["c"])(t)]; case 1: for (r = new (n.apply(Uint8Array, [void 0, i.sent()])), a = 0; a < 8; ++a)r[a] = R[a]; return o = new Blob([r], { type: "audio/mp4" }), [4, Object(l["a"])(o, e, "m4a", !1)]; case 2: return [2, i.sent()] } })) })) } var M = r("dc71"), q = r.n(M), C = r("b7c7"); function $(t, e, r) { var n; return Object(i["a"])(this, void 0, Promise, (function () { var r, a, o, c, l, u, d, m, f, b, h, v, g, y; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return [4, C["a"].loadJooxUUID("")]; case 1: if (r = i.sent(), !r || 32 !== r.length) throw new Error("请在“解密设定”填写应用 Joox 应用的 UUID。"); return o = Uint8Array.bind, [4, Object(s["c"])(t)]; case 2: if (a = new (o.apply(Uint8Array, [void 0, i.sent()])), c = q()(a, r), !c) throw new Error("不支持的 joox 加密格式"); return l = p(c.decryptFile(a)), u = Object(s["i"])(l), d = s["a"][u], m = null === (n = e.match(/^(\d+)\s\[mqms\d*]$/i)) || void 0 === n ? void 0 : n[1], [4, Object(w["a"])(new Blob([l], { type: d }), e, u, m)]; case 3: return f = i.sent(), b = f.album, h = f.artist, v = f.imgUrl, g = f.blob, y = f.title, [2, { title: y, artist: h, ext: u, album: b, picture: v, file: URL.createObjectURL(g), blob: g, mime: d }] } })) })) } var N = new Map([["x2m", W], ["x3m", H]]); function J(t, e, r) { return Object(i["a"])(this, void 0, Promise, (function () { var n, a, c, l, u, d, m, f, b; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return a = Uint8Array.bind, [4, Object(s["c"])(t)]; case 1: if (n = new (a.apply(Uint8Array, [void 0, i.sent()])), c = N.get(r), !c) throw "File type is incorrect!"; return l = c(n), u = Object(s["i"])(l, "m4a"), d = s["a"][u], m = new Blob([l], { type: d }), [4, Object(o["parseBlob"])(m)]; case 2: return f = i.sent(), b = Object(s["f"])(e, f.common.title, f.common.artist), [2, { picture: "", title: b.title, artist: b.artist, ext: u, album: f.common.album, blob: m, file: URL.createObjectURL(m), mime: d }] } })) })) } function W(t) { for (var e = 1024, r = [120, 109, 108, 121], i = t.slice(0, e), n = 0; n < e; n++) { var a = G[n]; t[n] = i[a] ^ r[n % r.length] } return t } function H(t) { for (var e = 1024, r = [51, 57, 56, 57, 100, 49, 49, 49, 97, 97, 100, 53, 54, 49, 51, 57, 52, 48, 102, 52, 102, 99, 52, 52, 98, 54, 51, 57, 98, 50, 57, 50], i = t.slice(0, e), n = 0; n < e; n++) { var a = Q[n]; t[n] = i[a] ^ r[n % r.length] } return t } var G = [681, 683, 340, 682, 680, 684, 339, 679, 685, 338, 678, 1023, 0, 341, 686, 337, 677, 1022, 1, 342, 687, 336, 676, 1021, 2, 343, 688, 335, 675, 1020, 3, 344, 689, 334, 674, 1019, 4, 345, 690, 333, 673, 1018, 5, 346, 691, 332, 672, 1017, 6, 347, 692, 331, 671, 1016, 7, 348, 693, 330, 670, 1015, 8, 349, 694, 329, 669, 1014, 9, 350, 695, 328, 668, 1013, 10, 351, 696, 327, 667, 1012, 11, 352, 697, 326, 666, 1011, 12, 353, 698, 325, 665, 1010, 13, 354, 699, 324, 664, 1009, 14, 355, 700, 323, 663, 1008, 15, 356, 701, 322, 662, 1007, 16, 357, 702, 321, 661, 1006, 17, 358, 703, 320, 660, 1005, 18, 359, 704, 319, 659, 1004, 19, 360, 705, 318, 658, 1003, 20, 361, 706, 317, 657, 1002, 21, 362, 707, 316, 656, 1001, 22, 363, 708, 315, 655, 1e3, 23, 364, 709, 314, 654, 999, 24, 365, 710, 313, 653, 998, 25, 366, 711, 312, 652, 997, 26, 367, 712, 311, 651, 996, 27, 368, 713, 310, 650, 995, 28, 369, 714, 309, 649, 994, 29, 370, 715, 308, 648, 993, 30, 371, 716, 307, 647, 992, 31, 372, 717, 169, 510, 855, 32, 373, 718, 170, 511, 856, 33, 374, 719, 171, 512, 857, 34, 375, 720, 172, 513, 858, 35, 376, 721, 173, 514, 859, 36, 377, 722, 174, 515, 860, 37, 378, 723, 175, 516, 861, 38, 379, 724, 176, 517, 862, 39, 380, 725, 177, 518, 863, 40, 381, 726, 178, 519, 864, 41, 382, 727, 179, 520, 865, 42, 383, 728, 180, 521, 866, 43, 384, 729, 181, 522, 867, 44, 385, 730, 182, 523, 868, 45, 386, 731, 183, 524, 869, 46, 387, 732, 184, 525, 870, 47, 388, 733, 185, 526, 871, 48, 389, 734, 186, 527, 872, 49, 390, 735, 187, 528, 873, 50, 391, 736, 188, 529, 874, 51, 392, 737, 189, 530, 875, 52, 393, 738, 190, 531, 876, 53, 394, 739, 191, 532, 877, 54, 395, 740, 192, 533, 878, 55, 396, 741, 193, 534, 879, 56, 397, 742, 194, 535, 880, 57, 398, 743, 195, 536, 881, 58, 399, 744, 196, 537, 882, 59, 400, 745, 197, 538, 883, 60, 401, 746, 198, 539, 884, 61, 402, 747, 199, 540, 885, 62, 403, 748, 200, 541, 886, 63, 404, 749, 201, 542, 887, 64, 405, 750, 202, 543, 888, 65, 406, 751, 203, 544, 889, 66, 407, 752, 204, 545, 890, 67, 408, 753, 205, 546, 891, 68, 409, 754, 206, 547, 892, 69, 410, 755, 207, 548, 893, 70, 411, 756, 208, 549, 894, 71, 412, 757, 209, 550, 895, 72, 413, 758, 210, 551, 896, 73, 414, 759, 211, 552, 897, 74, 415, 760, 212, 553, 898, 75, 416, 761, 213, 554, 899, 76, 417, 762, 214, 555, 900, 77, 418, 763, 215, 556, 901, 78, 419, 764, 216, 557, 902, 79, 420, 765, 217, 558, 903, 80, 421, 766, 218, 559, 904, 81, 422, 767, 219, 560, 905, 82, 423, 768, 220, 561, 906, 83, 424, 769, 221, 562, 907, 84, 425, 770, 222, 563, 908, 85, 426, 771, 223, 564, 909, 86, 427, 772, 224, 565, 910, 87, 428, 773, 225, 566, 911, 88, 429, 774, 226, 567, 912, 89, 430, 775, 227, 568, 913, 90, 431, 776, 228, 569, 914, 91, 432, 777, 229, 570, 915, 92, 433, 778, 230, 571, 916, 93, 434, 779, 231, 572, 917, 94, 435, 780, 232, 573, 918, 95, 436, 781, 233, 574, 919, 96, 437, 782, 234, 575, 920, 97, 438, 783, 235, 576, 921, 98, 439, 784, 236, 577, 922, 99, 440, 785, 237, 578, 923, 100, 441, 786, 238, 579, 924, 101, 442, 787, 239, 580, 925, 102, 443, 788, 240, 581, 926, 103, 444, 789, 241, 582, 927, 104, 445, 790, 242, 583, 928, 105, 446, 791, 243, 584, 929, 106, 447, 792, 244, 585, 930, 107, 448, 793, 245, 586, 931, 108, 449, 794, 246, 587, 932, 109, 450, 795, 247, 588, 933, 110, 451, 796, 248, 589, 934, 111, 452, 797, 249, 590, 935, 112, 453, 798, 250, 591, 936, 113, 454, 799, 251, 592, 937, 114, 455, 800, 252, 593, 938, 115, 456, 801, 253, 594, 939, 116, 457, 802, 254, 595, 940, 117, 458, 803, 255, 596, 941, 118, 459, 804, 256, 597, 942, 119, 460, 805, 257, 598, 943, 120, 461, 806, 258, 599, 944, 121, 462, 807, 259, 600, 945, 122, 463, 808, 260, 601, 946, 123, 464, 809, 261, 602, 947, 124, 465, 810, 262, 603, 948, 125, 466, 811, 263, 604, 949, 126, 467, 812, 264, 605, 950, 127, 468, 813, 265, 606, 951, 128, 469, 814, 266, 607, 952, 129, 470, 815, 267, 608, 953, 130, 471, 816, 268, 609, 954, 131, 472, 817, 269, 610, 955, 132, 473, 818, 270, 611, 956, 133, 474, 819, 271, 612, 957, 134, 475, 820, 272, 613, 958, 135, 476, 821, 273, 614, 959, 136, 477, 822, 274, 615, 960, 137, 478, 823, 275, 616, 961, 138, 479, 824, 276, 617, 962, 139, 480, 825, 277, 618, 963, 140, 481, 826, 278, 619, 964, 141, 482, 827, 279, 620, 965, 142, 483, 828, 280, 621, 966, 143, 484, 829, 281, 622, 967, 144, 485, 830, 282, 623, 968, 145, 486, 831, 283, 624, 969, 146, 487, 832, 284, 625, 970, 147, 488, 833, 285, 626, 971, 148, 489, 834, 286, 627, 972, 149, 490, 835, 287, 628, 973, 150, 491, 836, 288, 629, 974, 151, 492, 837, 289, 630, 975, 152, 493, 838, 290, 631, 976, 153, 494, 839, 291, 632, 977, 154, 495, 840, 292, 633, 978, 155, 496, 841, 293, 634, 979, 156, 497, 842, 294, 635, 980, 157, 498, 843, 295, 636, 981, 158, 499, 844, 296, 637, 982, 159, 500, 845, 297, 638, 983, 160, 501, 846, 298, 639, 984, 161, 502, 847, 299, 640, 985, 162, 503, 848, 300, 641, 986, 163, 504, 849, 301, 642, 987, 164, 505, 850, 302, 643, 988, 165, 506, 851, 303, 644, 989, 166, 507, 852, 304, 645, 990, 167, 508, 853, 305, 646, 991, 168, 509, 854, 306], Q = [598, 653, 531, 775, 342, 925, 98, 368, 970, 53, 237, 676, 484, 857, 211, 619, 613, 628, 593, 663, 514, 802, 294, 811, 279, 770, 348, 936, 87, 328, 896, 144, 502, 821, 268, 750, 373, 980, 43, 204, 608, 635, 573, 699, 438, 929, 94, 343, 926, 97, 367, 966, 57, 247, 697, 440, 927, 96, 358, 953, 70, 290, 796, 303, 829, 252, 714, 420, 972, 51, 230, 659, 521, 789, 317, 856, 213, 622, 606, 637, 570, 704, 433, 943, 80, 310, 838, 239, 682, 462, 886, 160, 528, 780, 332, 905, 130, 475, 871, 185, 574, 698, 439, 928, 95, 356, 951, 72, 293, 806, 284, 778, 335, 911, 112, 424, 967, 56, 245, 693, 445, 915, 108, 409, 993, 30, 179, 559, 727, 403, 1002, 21, 157, 522, 788, 318, 858, 210, 618, 615, 626, 595, 660, 520, 793, 311, 844, 231, 661, 517, 797, 302, 828, 254, 717, 416, 981, 42, 200, 600, 646, 554, 732, 398, 1015, 8, 124, 467, 880, 167, 541, 753, 369, 973, 50, 229, 658, 523, 787, 319, 860, 208, 614, 627, 594, 662, 516, 799, 298, 818, 271, 756, 364, 963, 60, 257, 722, 410, 992, 31, 181, 563, 713, 422, 969, 54, 240, 683, 459, 892, 149, 509, 808, 282, 774, 344, 930, 93, 341, 924, 99, 372, 979, 44, 207, 612, 629, 591, 665, 506, 812, 277, 767, 351, 939, 84, 323, 876, 173, 549, 741, 385, 1007, 16, 140, 497, 836, 243, 687, 452, 902, 136, 483, 859, 209, 617, 616, 621, 607, 636, 571, 703, 434, 942, 81, 315, 853, 218, 632, 584, 678, 476, 869, 192, 582, 680, 470, 877, 172, 548, 744, 382, 1003, 20, 156, 519, 794, 307, 833, 248, 700, 437, 931, 92, 338, 917, 106, 396, 1017, 6, 122, 465, 883, 164, 535, 766, 352, 941, 82, 316, 855, 215, 624, 604, 641, 565, 710, 426, 956, 67, 285, 781, 330, 900, 138, 487, 851, 221, 644, 558, 728, 402, 1004, 19, 153, 513, 803, 292, 801, 295, 813, 276, 765, 353, 944, 79, 309, 835, 244, 692, 446, 914, 109, 413, 987, 36, 190, 580, 688, 450, 906, 128, 473, 873, 182, 564, 712, 423, 968, 55, 241, 685, 454, 899, 141, 498, 827, 256, 721, 411, 990, 33, 187, 576, 694, 443, 921, 102, 378, 991, 32, 184, 572, 701, 436, 933, 90, 336, 912, 111, 421, 971, 52, 234, 669, 494, 840, 236, 675, 485, 854, 216, 625, 599, 649, 544, 748, 376, 985, 38, 194, 587, 673, 490, 845, 228, 657, 524, 786, 321, 864, 202, 602, 643, 560, 720, 412, 989, 34, 188, 577, 691, 447, 913, 110, 418, 977, 46, 214, 623, 605, 639, 567, 708, 428, 954, 69, 289, 792, 312, 846, 227, 655, 529, 779, 333, 908, 115, 451, 903, 132, 479, 866, 199, 597, 654, 530, 777, 339, 918, 105, 395, 1018, 5, 121, 464, 884, 162, 533, 769, 349, 937, 86, 327, 890, 152, 512, 804, 287, 790, 314, 850, 223, 648, 547, 745, 381, 1001, 22, 158, 525, 784, 324, 882, 165, 537, 762, 357, 952, 71, 291, 798, 301, 824, 263, 736, 392, 1022, 1, 117, 457, 894, 147, 505, 815, 274, 761, 359, 958, 65, 267, 743, 383, 1005, 18, 151, 511, 805, 286, 785, 322, 870, 186, 575, 696, 441, 923, 100, 374, 982, 41, 197, 592, 664, 508, 809, 281, 772, 346, 934, 89, 334, 910, 113, 429, 950, 73, 296, 814, 275, 764, 354, 946, 77, 305, 831, 250, 706, 431, 947, 76, 304, 830, 251, 711, 425, 957, 66, 278, 768, 350, 938, 85, 326, 888, 155, 518, 795, 306, 832, 249, 702, 435, 940, 83, 320, 861, 206, 610, 633, 583, 679, 471, 875, 174, 550, 739, 389, 1014, 9, 125, 468, 879, 168, 542, 752, 370, 974, 49, 222, 647, 552, 735, 393, 1021, 2, 118, 458, 893, 148, 507, 810, 280, 771, 347, 935, 88, 331, 904, 131, 477, 868, 193, 586, 674, 489, 848, 225, 651, 538, 760, 360, 959, 64, 266, 742, 384, 1006, 17, 145, 503, 820, 269, 751, 371, 975, 48, 220, 640, 566, 709, 427, 955, 68, 288, 791, 313, 847, 226, 652, 536, 763, 355, 948, 75, 300, 823, 264, 738, 390, 1020, 3, 119, 460, 891, 150, 510, 807, 283, 776, 340, 919, 104, 387, 1011, 12, 133, 480, 865, 201, 601, 645, 556, 730, 400, 1010, 13, 134, 481, 863, 203, 603, 642, 562, 716, 417, 978, 45, 212, 620, 611, 631, 585, 677, 478, 867, 198, 596, 656, 526, 783, 325, 887, 159, 527, 782, 329, 898, 142, 499, 826, 258, 723, 408, 994, 29, 178, 557, 729, 401, 1009, 14, 135, 482, 862, 205, 609, 634, 579, 689, 449, 907, 127, 472, 874, 180, 561, 719, 414, 986, 37, 191, 581, 684, 455, 897, 143, 501, 822, 265, 740, 388, 1012, 11, 129, 474, 872, 183, 569, 705, 432, 945, 78, 308, 834, 246, 695, 442, 922, 101, 377, 988, 35, 189, 578, 690, 448, 909, 114, 444, 920, 103, 386, 1008, 15, 139, 488, 849, 224, 650, 540, 755, 365, 964, 59, 255, 718, 415, 983, 40, 196, 590, 667, 496, 837, 242, 686, 453, 901, 137, 486, 852, 219, 638, 568, 707, 430, 949, 74, 299, 819, 270, 754, 366, 965, 58, 253, 715, 419, 976, 47, 217, 630, 588, 671, 492, 842, 233, 668, 495, 839, 238, 681, 463, 885, 161, 532, 773, 345, 932, 91, 337, 916, 107, 406, 998, 25, 171, 546, 746, 380, 997, 26, 175, 551, 737, 391, 1023, 0, 116, 456, 895, 146, 504, 817, 272, 758, 362, 961, 62, 260, 725, 405, 999, 24, 170, 545, 747, 379, 996, 27, 176, 553, 733, 397, 1016, 7, 123, 466, 881, 166, 539, 757, 363, 962, 61, 259, 724, 407, 995, 28, 177, 555, 731, 399, 1013, 10, 126, 469, 878, 169, 543, 749, 375, 984, 39, 195, 589, 670, 493, 841, 235, 672, 491, 843, 232, 666, 500, 825, 262, 734, 394, 1019, 4, 120, 461, 889, 154, 515, 800, 297, 816, 273, 759, 361, 960, 63, 261, 726, 404, 1e3, 23, 163, 534], V = r("efc0"); function K(t, e) { return Object(i["a"])(this, void 0, Promise, (function () { var r, o, u; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return C["a"] instanceof V["a"] ? [4, C["a"].setAll(e)] : [3, 2]; case 1: i.sent(), i.label = 2; case 2: switch (r = Object(s["j"])(t.name), u = r.ext, u) { case "mg3d": return [3, 3]; case "ncm": return [3, 5]; case "uc": return [3, 7]; case "kwm": return [3, 9]; case "xm": return [3, 11]; case "wav": return [3, 11]; case "mp3": return [3, 11]; case "flac": return [3, 11]; case "m4a": return [3, 11]; case "ogg": return [3, 13]; case "tm0": return [3, 15]; case "tm3": return [3, 15]; case "qmc0": return [3, 17]; case "qmc3": return [3, 17]; case "qmc2": return [3, 17]; case "qmc4": return [3, 17]; case "qmc6": return [3, 17]; case "qmc8": return [3, 17]; case "qmcflac": return [3, 17]; case "qmcogg": return [3, 17]; case "tkm": return [3, 17]; case "bkcmp3": return [3, 17]; case "bkcm4a": return [3, 17]; case "bkcflac": return [3, 17]; case "bkcwav": return [3, 17]; case "bkcape": return [3, 17]; case "bkcogg": return [3, 17]; case "bkcwma": return [3, 17]; case "mggl": return [3, 17]; case "mflac": return [3, 17]; case "mflac0": return [3, 17]; case "mflach": return [3, 17]; case "mgg": return [3, 17]; case "mgg1": return [3, 17]; case "mgg0": return [3, 17]; case "mmp4": return [3, 17]; case "666c6163": return [3, 17]; case "6d7033": return [3, 17]; case "6f6767": return [3, 17]; case "6d3461": return [3, 17]; case "776176": return [3, 17]; case "tm2": return [3, 19]; case "tm6": return [3, 19]; case "cache": return [3, 21]; case "vpr": return [3, 23]; case "kgm": return [3, 23]; case "kgma": return [3, 23]; case "ofl_en": return [3, 25]; case "x2m": return [3, 27]; case "x3m": return [3, 27]; case "mflach": return [3, 29] }return [3, 30]; case 3: return [4, Object(n["a"])(t.raw, r.name)]; case 4: return o = i.sent(), [3, 31]; case 5: return [4, Object(a["a"])(t.raw, r.name, r.ext)]; case 6: return o = i.sent(), [3, 31]; case 7: return [4, c(t.raw, r.name, r.ext)]; case 8: return o = i.sent(), [3, 31]; case 9: return [4, S(t.raw, r.name, r.ext)]; case 10: return o = i.sent(), [3, 31]; case 11: return [4, f(t.raw, r.name, r.ext)]; case 12: return o = i.sent(), [3, 31]; case 13: return [4, Object(l["a"])(t.raw, r.name, r.ext)]; case 14: return o = i.sent(), [3, 31]; case 15: return [4, Object(l["a"])(t.raw, r.name, "mp3")]; case 16: return o = i.sent(), [3, 31]; case 17: return [4, j(t.raw, r.name, r.ext)]; case 18: return o = i.sent(), [3, 31]; case 19: return [4, I(t.raw, r.name)]; case 20: return o = i.sent(), [3, 31]; case 21: return [4, O(t.raw, r.name, r.ext)]; case 22: return o = i.sent(), [3, 31]; case 23: return [4, P(t.raw, r.name, r.ext)]; case 24: return o = i.sent(), [3, 31]; case 25: return [4, $(t.raw, r.name, r.ext)]; case 26: return o = i.sent(), [3, 31]; case 27: return [4, J(t.raw, r.name, r.ext)]; case 28: return o = i.sent(), [3, 31]; case 29: throw '网页版无法解锁，请使用<a target="_blank" href="https://git.unlock-music.dev/um/cli">CLI版本</a>'; case 30: throw "不支持此文件格式"; case 31: return o.rawExt || (o.rawExt = r.ext), o.rawFilename || (o.rawFilename = r.name), console.log(o), [2, o] } })) })) } }, "5c0b": function (t, e, r) { "use strict"; r("9c0c") }, 6: function (t, e) { }, "675e": function (t, e, r) { "use strict"; r.d(e, "a", (function () { return i })); var i = "um.conf.", n = "".concat(i, "joox.uuid"), a = function () { function t() { } return t.prototype.saveJooxUUID = function (t) { return this.save(n, t) }, t.prototype.loadJooxUUID = function (t) { return void 0 === t && (t = ""), this.load(n, t) }, t }(); e["b"] = a }, "6d95": function (t, e, r) { "use strict"; (function (t) { r.d(e, "a", (function () { return k })); r("907a"), r("3c5d"); var i = r("9ab4"), n = r("cc74"), a = r("cb96"), s = r("ef21"), o = r.n(s), c = r("c198"), l = r.n(c), u = r("ead9"), d = r.n(u), m = r("81bf"), f = r.n(m), b = r("17e1"), h = r.n(b), p = r("1132"), v = r.n(p), g = r("f8d5"), w = r.n(g), y = r("640f"), j = r.n(y), O = j.a.parse("687a4852416d736f356b496e62617857"), _ = j.a.parse("2331346C6A6B5F215C5D2630553C2728"), x = [67, 84, 69, 78, 70, 68, 65, 77]; function k(t, e, r) { return Object(i["a"])(this, void 0, Promise, (function () { var r; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return r = A.bind, [4, Object(n["c"])(t)]; case 1: return [2, (new (r.apply(A, [void 0, i.sent(), e]))).decrypt()] } })) })) } var A = function () { function e(t, e) { this.offset = 0, this.format = "", this.mime = ""; var r = new Uint8Array(t, 0, 8); if (!Object(n["b"])(r, x)) throw Error("此ncm文件已损坏"); this.offset = 10, this.raw = t, this.view = new DataView(t), this.filename = e } return e.prototype._getKeyData = function () { var t = this.view.getUint32(this.offset, !0); this.offset += 4; var e = new Uint8Array(this.raw, this.offset, t).map((function (t) { return 100 ^ t })); this.offset += t; for (var r = l.a.decrypt({ ciphertext: h.a.create(e) }, O, { mode: f.a, padding: d.a }), i = new Uint8Array(r.sigBytes), n = r.words, a = r.sigBytes, s = 0; s < a; s++)i[s] = n[s >>> 2] >>> 24 - s % 4 * 8 & 255; return i.slice(17) }, e.prototype._getKeyBox = function () { for (var t, e = this._getKeyData(), r = new Uint8Array(Array(256).keys()), i = e.length, n = 0, a = 0; a < 256; a++)n = r[a] + n + e[a % i] & 255, t = [r[n], r[a]], r[a] = t[0], r[n] = t[1]; return r.map((function (t, e, r) { e = e + 1 & 255; var i = r[e], n = r[e + i & 255]; return r[i + n & 255] })) }, e.prototype._getMetaData = function () { var t = this.view.getUint32(this.offset, !0); if (this.offset += 4, 0 === t) return {}; var e = new Uint8Array(this.raw, this.offset, t).map((function (t) { return 99 ^ t })); this.offset += t, h.a.create(); var r, i = l.a.decrypt({ ciphertext: v.a.parse(h.a.create(e.slice(22)).toString(w.a)) }, _, { mode: f.a, padding: d.a }).toString(w.a), n = i.indexOf(":"); if ("dj" === i.slice(0, n)) { var a = JSON.parse(i.slice(n + 1)); r = a.mainMusic } else r = JSON.parse(i.slice(n + 1)); return r.albumPic && (r.albumPic = r.albumPic.replace("http://", "https://") + "?param=500y500"), r }, e.prototype._getAudio = function (t) { this.offset += this.view.getUint32(this.offset + 5, !0) + 13; for (var e = new Uint8Array(this.raw, this.offset), r = e.length, i = 0; i < r; ++i)e[i] ^= t[255 & i]; return e }, e.prototype._buildMeta = function () { var e; return Object(i["a"])(this, void 0, void 0, (function () { var r, a, s, c, l, u; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: if (!this.oriMeta) throw Error("invalid sequence"); if (r = Object(n["f"])(this.filename, this.oriMeta.musicName), a = [], "string" === typeof this.oriMeta.artist ? a.push(this.oriMeta.artist) : Array.isArray(this.oriMeta.artist) && this.oriMeta.artist.forEach((function (t) { "string" === typeof t ? a.push(t) : Array.isArray(t) && t[0] && "string" === typeof t[0] && a.push(t[0]) })), 0 === a.length && r.artist && (a = r.artist.split(",").map((function (t) { return t.trim() })).filter((function (t) { return "" != t }))), !this.oriMeta.albumPic) return [3, 9]; i.label = 1; case 1: return i.trys.push([1, 8, , 9]), s = this, [4, Object(n["e"])(this.oriMeta.albumPic)]; case 2: s.image = i.sent(), i.label = 3; case 3: return this.image && this.image.buffer.byteLength >= 1 << 24 ? [4, o.a.read(t.from(this.image.buffer))] : [3, 7]; case 4: return c = i.sent(), [4, c.resize(Math.round(c.getHeight() / 2), o.a.AUTO)]; case 5: return i.sent(), l = this.image, [4, c.getBufferAsync("image/jpeg")]; case 6: return l.buffer = i.sent(), [3, 3]; case 7: return [3, 9]; case 8: return u = i.sent(), console.log("fetch cover image failed", u), [3, 9]; case 9: return this.newMeta = { title: r.title, artists: a, album: this.oriMeta.album, picture: null === (e = this.image) || void 0 === e ? void 0 : e.buffer }, [2] } })) })) }, e.prototype._writeMeta = function () { return Object(i["a"])(this, void 0, void 0, (function () { var e, r; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: if (!this.audio || !this.newMeta) throw Error("invalid sequence"); return this.blob || (this.blob = new Blob([this.audio], { type: this.mime })), [4, Object(a["parseBlob"])(this.blob)]; case 1: if (e = i.sent(), r = !e.common.album && !e.common.artists && !e.common.title, r || this.newMeta.picture) { if ("mp3" === this.format) this.audio = Object(n["l"])(t.from(this.audio), this.newMeta, e); else { if ("flac" !== this.format) return console.info("writing meta for ".concat(this.format, " is not being supported for now")), [2]; this.audio = Object(n["k"])(t.from(this.audio), this.newMeta, e) } this.blob = new Blob([this.audio], { type: this.mime }) } return [2] } })) })) }, e.prototype.gatherResult = function () { var t, e; if (!this.newMeta || !this.blob) throw Error("bad sequence"); return { title: this.newMeta.title, artist: null === (t = this.newMeta.artists) || void 0 === t ? void 0 : t.join("; "), ext: this.format, album: this.newMeta.album, picture: null === (e = this.image) || void 0 === e ? void 0 : e.url, file: URL.createObjectURL(this.blob), blob: this.blob, mime: this.mime } }, e.prototype.decrypt = function () { return Object(i["a"])(this, void 0, void 0, (function () { var t, e; return Object(i["c"])(this, (function (r) { switch (r.label) { case 0: t = this._getKeyBox(), this.oriMeta = this._getMetaData(), this.audio = this._getAudio(t), this.format = this.oriMeta.format || Object(n["i"])(this.audio), this.mime = n["a"][this.format], r.label = 1; case 1: return r.trys.push([1, 4, , 5]), [4, this._buildMeta()]; case 2: return r.sent(), [4, this._writeMeta()]; case 3: return r.sent(), [3, 5]; case 4: return e = r.sent(), console.warn("build/write meta failed, skip.", e), [3, 5]; case 5: return [2, this.gatherResult()] } })) })) }, e }() }).call(this, r("1c35").Buffer) }, "730d": function (t, e, r) { "use strict"; var i = function () { var t = this, e = t.$createElement, r = t._self._c || e; return r("el-dialog", { attrs: { title: "解密设定", visible: t.show, "custom-class": "um-config-dialog", center: "" }, on: { close: function (e) { return t.cancel() } } }, [r("el-form", { ref: "form", attrs: { rules: t.rules, "status-icon": "", model: t.form, "label-width": "0" } }, [r("section", [r("label", [r("span", [t._v(" JOOX Music · "), r("Ruby", { attrs: { caption: "Unique Device Identifier" } }, [t._v("设备唯一识别码")])], 1), r("el-form-item", { attrs: { prop: "jooxUUID" } }, [r("el-input", { attrs: { type: "text", clearable: "", maxlength: "32", "show-word-limit": "" }, model: { value: t.form.jooxUUID, callback: function (e) { t.$set(t.form, "jooxUUID", e) }, expression: "form.jooxUUID" } })], 1)], 1), r("p", { staticClass: "item-desc" }, [t._v(" 下载该加密文件的 JOOX 应用所记录的设备唯一识别码。 "), r("br"), t._v(" 参见： "), r("a", { attrs: { href: "https://github.com/unlock-music/joox-crypto/wiki/%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87-UUID" } }, [t._v(" 获取设备 UUID · unlock-music/joox-crypto Wiki")]), t._v("。 ")])])]), r("span", { staticClass: "dialog-footer", attrs: { slot: "footer" }, slot: "footer" }, [r("el-button", { attrs: { type: "primary", loading: t.saving }, on: { click: function (e) { return t.emitConfirm() } } }, [t._v("确 定")])], 1)], 1) }, n = [], a = r("b7c7"), s = r("77b3"); function o(t, e, r) { e && /^[\da-fA-F]{32}$/.test(e) ? r() : r(new Error("无效的 Joox UUID，请参考 Wiki 获取。")) } const c = { jooxUUID: { validator: o, trigger: "change" } }; var l = { components: { Ruby: s["a"] }, props: { show: { type: Boolean, required: !0 } }, data() { return { rules: c, saving: !1, form: { jooxUUID: "" }, centerDialogVisible: !1 } }, async mounted() { await this.resetForm() }, methods: { async resetForm() { this.form.jooxUUID = await a["a"].loadJooxUUID() }, async cancel() { await this.resetForm(), this.$emit("done") }, async emitConfirm() { this.saving = !0, await a["a"].saveJooxUUID(this.form.jooxUUID), this.saving = !1, this.$emit("done") } } }, u = l, d = (r("b0a8"), r("2877")), m = Object(d["a"])(u, i, n, !1, null, "58e4a4a6", null); e["a"] = m.exports }, "73ec": function (t, e, r) { "use strict"; r.d(e, "e", (function () { return i })), r.d(e, "d", (function () { return a })), r.d(e, "b", (function () { return o })), r.d(e, "c", (function () { return c })), r.d(e, "f", (function () { return l })), r.d(e, "a", (function () { return u })); var i, n = r("9ab4"); (function (t) { t[t["ArtistAndTitle"] = 0] = "ArtistAndTitle", t[t["TitleOnly"] = 1] = "TitleOnly", t[t["TitleAndArtist"] = 2] = "TitleAndArtist", t[t["SameAsOriginal"] = 3] = "SameAsOriginal" })(i || (i = {})); var a = [{ key: i.ArtistAndTitle, text: "歌手-歌曲名" }, { key: i.TitleOnly, text: "歌曲名" }, { key: i.TitleAndArtist, text: "歌曲名-歌手" }, { key: i.SameAsOriginal, text: "同源文件名" }]; function s(t, e) { switch (e) { case i.TitleOnly: return "".concat(t.title, ".").concat(t.ext); case i.TitleAndArtist: return "".concat(t.title, " - ").concat(t.artist, ".").concat(t.ext); case i.SameAsOriginal: return "".concat(t.rawFilename, ".").concat(t.ext); default: case i.ArtistAndTitle: return "".concat(t.artist, " - ").concat(t.title, ".").concat(t.ext) } } function o(t, e, r) { return Object(n["a"])(this, void 0, void 0, (function () { var i, a, o; return Object(n["c"])(this, (function (n) { switch (n.label) { case 0: i = s(t, e), n.label = 1; case 1: return n.trys.push([1, 3, , 4]), [4, r.getFileHandle(i)]; case 2: return n.sent(), i = "".concat((new Date).getTime(), " - ").concat(i), [3, 4]; case 3: return n.sent(), [3, 4]; case 4: return [4, r.getFileHandle(i, { create: !0 })]; case 5: return a = n.sent(), [4, a.createWritable()]; case 6: return o = n.sent(), [4, o.write(t.blob)]; case 7: return n.sent(), [4, o.close()]; case 8: return n.sent(), [2] } })) })) } function c(t, e) { var r = document.createElement("a"); r.href = t.file, r.download = s(t, e), document.body.append(r), r.click(), r.remove() } function l(t) { var e; URL.revokeObjectURL(t.file), (null === (e = t.picture) || void 0 === e ? void 0 : e.startsWith("blob:")) && URL.revokeObjectURL(t.picture) } var u = function () { function t() { this.pending = [] } return t.prototype.queue = function (t) { this.pending.push(t), this.consume() }, t.prototype.consume = function () { var t = this, e = this.pending.shift(); e && e().then((function () { return t.consume })).catch(console.error) }, t }() }, "77b3": function (t, e, r) { "use strict"; var i = function () { var t = this, e = t.$createElement, r = t._self._c || e; return r("ruby", { attrs: { title: t.caption } }, [t._t("default"), r("rp", [t._v("（")]), r("rt", { domProps: { textContent: t._s(t.caption) } }), r("rp", [t._v("）")])], 2) }, n = [], a = { name: "Ruby", props: { caption: { type: String, required: !0 } } }, s = a, o = r("2877"), c = Object(o["a"])(s, i, n, !1, null, null, null); e["a"] = c.exports }, "8c80": function (t, e, r) { }, 9224: function (t) { t.exports = JSON.parse('{"name":"unlock-music","version":"1.10.5","ext_build":0,"updateInfo":"完善音乐标签编辑功能，支持编辑更多标签","license":"MIT","description":"Unlock encrypted music file in browser.","repository":{"type":"git","url":"https://github.com/ix64/unlock-music"},"private":true,"scripts":{"postinstall":"patch-package","serve":"vue-cli-service serve","build":"vue-cli-service build","test":"jest","pretty":"prettier --write src/{**/*,*}.{js,ts,jsx,tsx,vue}","pretty:check":"prettier --check src/{**/*,*}.{js,ts,jsx,tsx,vue}","make-extension":"node ./make-extension.js"},"dependencies":{"@babel/preset-typescript":"^7.16.5","@unlock-music/joox-crypto":"^0.0.1-R5","@xhacker/kgmwasm":"^1.0.0","@xhacker/qmcwasm":"^1.0.0","base64-js":"^1.5.1","browser-id3-writer":"^4.4.0","core-js":"^3.16.0","crypto-js":"^4.1.1","element-ui":"^2.15.5","iconv-lite":"^0.6.3","jimp":"^0.16.1","metaflac-js":"^1.0.5","music-metadata":"7.9.0","music-metadata-browser":"2.2.7","register-service-worker":"^1.7.2","threads":"^1.6.5","vue":"^2.6.14"},"devDependencies":{"@types/crypto-js":"^4.0.2","@types/jest":"^27.0.3","@vue/cli-plugin-babel":"^4.5.13","@vue/cli-plugin-pwa":"^4.5.13","@vue/cli-plugin-typescript":"^4.5.13","@vue/cli-service":"^4.5.13","babel-plugin-component":"^1.1.1","jest":"^27.4.5","patch-package":"^6.4.7","prettier":"2.5.1","sass":"^1.38.1","sass-loader":"^10.2.0","semver":"^7.3.5","threads-plugin":"^1.4.0","typescript":"^4.5.4","vue-cli-plugin-element":"^1.0.1","vue-template-compiler":"^2.6.14"}}') }, "97e5": function (t, e, r) { "use strict"; r.d(e, "a", (function () { return a })), r.d(e, "c", (function () { return s })), r.d(e, "d", (function () { return o })), r.d(e, "b", (function () { return c })); var i = r("9ab4"), n = "https://um-api.ixarea.com"; function a(t) { return Object(i["a"])(this, void 0, Promise, (function () { var e; return Object(i["c"])(this, (function (r) { switch (r.label) { case 0: return [4, fetch(n + "/music/app-version", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ Version: t }) })]; case 1: return e = r.sent(), [4, e.json()]; case 2: return [2, r.sent()] } })) })) } function s(t, e, r) { return Object(i["a"])(this, void 0, Promise, (function () { var a, s, o; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return a = n + "/music/qq-cover", s = new URLSearchParams([["Title", t], ["Artist", null !== e && void 0 !== e ? e : ""], ["Album", null !== r && void 0 !== r ? r : ""]]), [4, fetch("".concat(a, "?").concat(s.toString()))]; case 1: return o = i.sent(), [4, o.json()]; case 2: return [2, i.sent()] } })) })) } function o(t) { return Object(i["a"])(this, void 0, Promise, (function () { var e, r; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return e = "".concat(n, "/meta/qq-music-raw/").concat(t), [4, fetch(e).then((function (t) { return t.json() }))]; case 1: if (r = i.sent(), 0 === r.code && 0 === r.req_1.code) return [2, r.req_1.data]; throw new Error("请求信息失败") } })) })) } function c(t, e) { return void 0 === e && (e = 1), "".concat(n, "/music/qq-cover/").concat(e, "/").concat(t) } }, "9b2d": function (t, e, r) { "use strict"; (function (t) { r.d(e, "a", (function () { return u })); r("907a"), r("3c5d"); var i = r("9ab4"), n = r("0ba7"), a = r("cc74"), s = 32; function o(t) { return t >= 32 && t <= 126 } function c(t) { return t >= 48 && t <= 57 || t >= 65 && t <= 70 } function l(e, r) { for (var i = 0; i < e.byteLength; i++)e[i] -= r[i % s]; return t.from(e) } function u(e, r) { return Object(i["a"])(this, void 0, Promise, (function () { var u, d, m, f, b, h, p, v, g, w, y, j, O, _, x, k; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return d = Uint8Array.bind, [4, Object(a["c"])(e)]; case 1: for (u = new (d.apply(Uint8Array, [void 0, i.sent()])), m = u.slice(0, 256), f = t.from("RIFF", "ascii"), b = t.from("WAVEfmt ", "ascii"), h = [], p = s; p < 20 * s; p += s)v = u.slice(p, p + s), v.every(c) && (g = l(m, v), g.slice(0, 4).compare(f) || g.slice(8, 16).compare(b) || (w = g.readUInt32LE(16), [16, 18, 40].includes(w) && (y = 20 + w, j = g.slice(y, y + 4), j.every(o) && (O = y + 8 + g.readUInt32LE(y + 4), O <= m.byteLength && (_ = g.slice(O, O + 4), !_.every(o)) || h.push(t.from(v).toString("ascii")))))); if (h.length <= 0) throw new Error("ERROR: no suitable key discovered"); return x = t.from(h[0], "ascii"), l(u, x), k = new Blob([u], { type: "audio/x-wav" }), [4, Object(n["a"])(k, r, "wav", !1)]; case 2: return [2, i.sent()] } })) })) } }).call(this, r("1c35").Buffer) }, "9c0c": function (t, e, r) { }, ab8f: function (t, e, r) { "use strict"; var i = function () { var t = this, e = t.$createElement, r = t._self._c || e; return r("el-upload", { attrs: { "auto-upload": !1, "on-change": t.addFile, "show-file-list": !1, action: "", drag: "", multiple: "" } }, [r("i", { staticClass: "el-icon-upload" }), r("div", { staticClass: "el-upload__text" }, [t._v("将文件拖到此处，或 "), r("em", [t._v("点击选择")])]), r("div", { staticClass: "el-upload__tip", attrs: { slot: "tip" }, slot: "tip" }, [r("div", [t._v(" 仅在浏览器内对文件进行解锁，无需消耗流量 "), r("el-tooltip", { attrs: { effect: "dark", placement: "top-start" } }, [r("div", { attrs: { slot: "content" }, slot: "content" }, [t._v("算法在源代码中已经提供，所有运算都发生在本地")]), r("i", { staticClass: "el-icon-info", staticStyle: { "font-size": "12px" } })])], 1), r("div", [t._v(" 工作模式: " + t._s(t.parallel ? "多线程 Worker" : "单线程 Queue") + " "), r("el-tooltip", { attrs: { effect: "dark", placement: "top-start" } }, [r("div", { attrs: { slot: "content" }, slot: "content" }, [t._v(" 将此工具部署在HTTPS环境下，可以启用Web Worker特性，"), r("br"), t._v(" 从而更快的利用并行处理完成解锁 ")]), r("i", { staticClass: "el-icon-info", staticStyle: { "font-size": "12px" } })])], 1)]), r("transition", { attrs: { name: "el-fade-in" } }, [r("el-progress", { directives: [{ name: "show", rawName: "v-show", value: t.progress_show, expression: "progress_show" }], staticStyle: { margin: "16px 6px 0 6px" }, attrs: { format: t.progress_string, percentage: t.progress_value, "stroke-width": 16, "text-inside": !0 } })], 1)], 1) }, n = [], a = r("0565"), s = a["a"], o = r("2877"), c = Object(o["a"])(s, i, n, !1, null, null, null); e["a"] = c.exports }, af85: function (t, e, r) { "use strict"; var i = function () { var t = this, e = t.$createElement, r = t._self._c || e; return r("el-table", { staticStyle: { width: "100%" }, attrs: { data: t.tableData } }, [r("el-table-column", { attrs: { label: "封面" }, scopedSlots: t._u([{ key: "default", fn: function (e) { return [r("el-image", { staticStyle: { width: "100px", height: "100px" }, attrs: { src: e.row.picture } }, [r("div", { staticClass: "image-slot el-image__error", attrs: { slot: "error" }, slot: "error" }, [t._v("暂无封面")])])] } }]) }), r("el-table-column", { attrs: { label: "歌曲" }, scopedSlots: t._u([{ key: "default", fn: function (e) { return [r("span", [t._v(t._s(e.row.title))])] } }]) }), r("el-table-column", { attrs: { label: "歌手" }, scopedSlots: t._u([{ key: "default", fn: function (e) { return [r("p", [t._v(t._s(e.row.artist))])] } }]) }), r("el-table-column", { attrs: { label: "专辑" }, scopedSlots: t._u([{ key: "default", fn: function (e) { return [r("p", [t._v(t._s(e.row.album))])] } }]) }), r("el-table-column", { attrs: { label: "操作" }, scopedSlots: t._u([{ key: "default", fn: function (e) { return [r("el-button", { attrs: { circle: "", icon: "el-icon-video-play", type: "success" }, on: { click: function (r) { return t.handlePlay(e.$index, e.row) } } }), r("el-button", { attrs: { circle: "", icon: "el-icon-download" }, on: { click: function (r) { return t.handleDownload(e.row) } } }), r("el-button", { attrs: { circle: "", icon: "el-icon-edit" }, on: { click: function (r) { return t.handleEdit(e.row) } } }), r("el-button", { attrs: { circle: "", icon: "el-icon-delete", type: "danger" }, on: { click: function (r) { return t.handleDelete(e.$index, e.row) } } })] } }]) })], 1) }, n = [], a = r("73ec"), s = { name: "PreviewTable", props: { tableData: { type: Array, required: !0 }, policy: { type: Number, required: !0 } }, methods: { handlePlay(t, e) { this.$emit("play", e.file) }, handleDelete(t, e) { Object(a["f"])(e), this.tableData.splice(t, 1) }, handleDownload(t) { this.$emit("download", t) }, handleEdit(t) { this.$emit("edit", t) } } }, o = s, c = r("2877"), l = Object(c["a"])(o, i, n, !1, null, "7ee4db14", null); e["a"] = l.exports }, b025: function (t, e, r) { }, b0a8: function (t, e, r) { "use strict"; r("b025") }, b7c7: function (t, e, r) { "use strict"; r.d(e, "a", (function () { return d })); var i = r("9ab4"), n = r("675e"), a = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i["b"])(e, t), Object.defineProperty(e, "works", { get: function () { return "undefined" !== typeof localStorage && localStorage.getItem }, enumerable: !1, configurable: !0 }), e.prototype.load = function (t, e) { return Object(i["a"])(this, void 0, Promise, (function () { var r; return Object(i["c"])(this, (function (i) { if (r = localStorage.getItem(t), null === r) return [2, e]; try { return [2, JSON.parse(r)] } catch (n) { return [2, e] } return [2] })) })) }, e.prototype.save = function (t, e) { return Object(i["a"])(this, void 0, Promise, (function () { return Object(i["c"])(this, (function (r) { return localStorage.setItem(t, JSON.stringify(e)), [2] })) })) }, e.prototype.getAll = function () { return Object(i["a"])(this, void 0, Promise, (function () { var t, e, r, a, s, o, c; return Object(i["c"])(this, (function (i) { for (t = {}, e = 0, r = Object.entries(localStorage); e < r.length; e++)if (a = r[e], s = a[0], o = a[1], s.startsWith(n["a"])) try { Object.assign(t, (c = {}, c[s] = JSON.parse(o), c)) } catch (l) { } return [2, t] })) })) }, e.prototype.setAll = function (t) { return Object(i["a"])(this, void 0, Promise, (function () { var e, r, n, a, s; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: e = 0, r = Object.entries(t), i.label = 1; case 1: return e < r.length ? (n = r[e], a = n[0], s = n[1], [4, this.save(a, s)]) : [3, 4]; case 2: i.sent(), i.label = 3; case 3: return e++, [3, 1]; case 4: return [2] } })) })) }, e }(n["b"]), s = a, o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i["b"])(e, t), Object.defineProperty(e, "works", { get: function () { var t, e; return "undefined" !== typeof chrome && Boolean(null === (e = null === (t = null === chrome || void 0 === chrome ? void 0 : chrome.storage) || void 0 === t ? void 0 : t.local) || void 0 === e ? void 0 : e.set) }, enumerable: !1, configurable: !0 }), e.prototype.load = function (t, e) { return Object(i["a"])(this, void 0, Promise, (function () { return Object(i["c"])(this, (function (r) { return [2, new Promise((function (r) { var i; chrome.storage.local.get((i = {}, i[t] = e, i), (function (i) { Object.prototype.hasOwnProperty.call(i, t) ? r(i[t]) : r(e) })) }))] })) })) }, e.prototype.save = function (t, e) { return Object(i["a"])(this, void 0, Promise, (function () { return Object(i["c"])(this, (function (r) { return [2, new Promise((function (r) { var i; chrome.storage.local.set((i = {}, i[t] = e, i), r) }))] })) })) }, e.prototype.getAll = function () { return Object(i["a"])(this, void 0, Promise, (function () { return Object(i["c"])(this, (function (t) { return [2, new Promise((function (t) { chrome.storage.local.get(null, (function (e) { for (var r = {}, i = 0, a = Object.entries(e); i < a.length; i++) { var s = a[i], o = s[0], c = s[1]; o.startsWith(n["a"]) && (r[o] = c) } t(r) })) }))] })) })) }, e.prototype.setAll = function (t) { return Object(i["a"])(this, void 0, Promise, (function () { return Object(i["c"])(this, (function (e) { return [2, new Promise((function (e) { chrome.storage.local.set(t, e) }))] })) })) }, e }(n["b"]), c = o, l = r("efc0"); function u() { return c.works ? new c : s.works ? new s : new l["a"] } var d = u() }, cc74: function (t, e, r) { "use strict"; (function (t) { r.d(e, "m", (function () { return c })), r.d(e, "a", (function () { return v })), r.d(e, "b", (function () { return g })), r.d(e, "i", (function () { return w })), r.d(e, "c", (function () { return y })), r.d(e, "d", (function () { return j })), r.d(e, "f", (function () { return O })), r.d(e, "e", (function () { return _ })), r.d(e, "l", (function () { return x })), r.d(e, "k", (function () { return k })), r.d(e, "h", (function () { return A })), r.d(e, "g", (function () { return U })), r.d(e, "j", (function () { return T })); var i = r("9ab4"), n = r("7907"), a = r.n(n), s = r("b686"), o = r.n(s), c = /[ ]?[,;/_、][ ]?/, l = [102, 76, 97, 67], u = [73, 68, 51], d = [79, 103, 103, 83], m = [102, 116, 121, 112], f = [48, 38, 178, 117, 142, 102, 207, 17, 166, 217, 0, 170, 0, 98, 206, 108], b = [82, 73, 70, 70], h = [255, 241], p = [70, 82, 77, 56], v = { mp3: "audio/mpeg", flac: "audio/flac", m4a: "audio/mp4", ogg: "audio/ogg", wma: "audio/x-ms-wma", wav: "audio/x-wav", dff: "audio/x-dff" }; function g(t, e) { return !(e.length > t.length) && e.every((function (e, r) { return e === t[r] })) } function w(t, e) { return void 0 === e && (e = "mp3"), g(t, u) ? "mp3" : g(t, l) ? "flac" : g(t, d) ? "ogg" : t.length >= 4 + m.length && g(t.slice(4), m) ? "m4a" : g(t, b) ? "wav" : g(t, f) ? "wma" : g(t, h) ? "aac" : g(t, p) ? "dff" : e } function y(t) { return t.arrayBuffer ? t.arrayBuffer() : new Promise((function (e, r) { var i = new FileReader; i.onload = function (t) { var i, n = null === (i = t.target) || void 0 === i ? void 0 : i.result; n ? e(n) : r("read file failed") }, i.readAsArrayBuffer(t) })) } function j(t) { var e; return (null === (e = t.common) || void 0 === e ? void 0 : e.picture) && t.common.picture.length > 0 ? URL.createObjectURL(new Blob([t.common.picture[0].data], { type: t.common.picture[0].format })) : "" } function O(t, e, r, i) { void 0 === i && (i = "-"); var n = { title: null !== e && void 0 !== e ? e : "", artist: r }, a = t.split(i); return a.length > 1 ? ((!n.artist || n.artist.split(c).length < a[0].trim().split(c).length) && (n.artist = a[0].trim()), n.title || (n.title = a[1].trim())) : 1 === a.length && (n.title || (n.title = a[0].trim())), n } function _(t) { return Object(i["a"])(this, void 0, Promise, (function () { var e, r, n, a, s; return Object(i["c"])(this, (function (i) { switch (i.label) { case 0: return i.trys.push([0, 4, , 5]), [4, fetch(t)]; case 1: return e = i.sent(), r = e.headers.get("Content-Type"), (null === r || void 0 === r ? void 0 : r.startsWith("image/")) ? [4, e.arrayBuffer()] : [3, 3]; case 2: return n = i.sent(), a = URL.createObjectURL(new Blob([n], { type: r })), [2, { buffer: n, url: a, mime: r }]; case 3: return [3, 5]; case 4: return s = i.sent(), console.warn(s), [3, 5]; case 5: return [2] } })) })) } function x(t, e, r) { var i = new a.a(t), n = r.native["ID3v2.4"] || r.native["ID3v2.3"] || r.native["ID3v2.2"] || []; n.forEach((function (t) { if ("TPE1" !== t.id && "TIT2" !== t.id && "TALB" !== t.id) try { i.setFrame(t.id, t.value) } catch (e) { console.warn("failed to write ID3 tag '".concat(t.id, "'")) } })); var s = r.common; return i.setFrame("TPE1", (null === s || void 0 === s ? void 0 : s.artists) || e.artists || []).setFrame("TIT2", (null === s || void 0 === s ? void 0 : s.title) || e.title).setFrame("TALB", (null === s || void 0 === s ? void 0 : s.album) || e.album || ""), e.picture && i.setFrame("APIC", { type: 3, data: e.picture, description: e.picture_desc || "" }), i.addTag() } function k(e, r, i) { var n = new o.a(e), a = i.common; return a.title || a.album || !a.artists || (n.setTag("TITLE=" + r.title), n.setTag("ALBUM=" + r.album), r.artists && (n.removeTag("ARTIST"), r.artists.forEach((function (t) { return n.setTag("ARTIST=" + t) })))), r.picture && n.importPictureFromBuffer(t.from(r.picture)), n.save() } function A(t, e, r) { var i = new a.a(t), n = r.native["ID3v2.4"] || r.native["ID3v2.3"] || r.native["ID3v2.2"] || []; n.forEach((function (t) { if ("TPE1" !== t.id && "TIT2" !== t.id && "TALB" !== t.id && "TPE2" !== t.id && "TCON" !== t.id) try { i.setFrame(t.id, t.value) } catch (e) { throw new Error("failed to write ID3 tag '".concat(t.id, "'")) } })); var s = r.common; return i.setFrame("TPE1", (null === e || void 0 === e ? void 0 : e.artists) || s.artists || []).setFrame("TIT2", (null === e || void 0 === e ? void 0 : e.title) || s.title).setFrame("TALB", (null === e || void 0 === e ? void 0 : e.album) || s.album || "").setFrame("TPE2", (null === e || void 0 === e ? void 0 : e.albumartist) || s.albumartist || "").setFrame("TCON", (null === e || void 0 === e ? void 0 : e.genre) || s.genre || []), e.picture && i.setFrame("APIC", { type: 3, data: e.picture, description: e.picture_desc || "" }), i.addTag() } function U(e, r, i) { var n = new o.a(e), a = i.common; return r.title && (a.title && n.removeTag("TITLE"), n.setTag("TITLE=" + r.title)), r.album && (a.album && n.removeTag("ALBUM"), n.setTag("ALBUM=" + r.album)), r.albumartist && (a.albumartist && n.removeTag("ALBUMARTIST"), n.setTag("ALBUMARTIST=" + r.albumartist)), r.artists && (a.artists && n.removeTag("ARTIST"), r.artists.forEach((function (t) { return n.setTag("ARTIST=" + t) }))), r.genre && (a.genre && n.removeTag("GENRE"), r.genre.forEach((function (t) { return n.setTag("GENRE=" + t) }))), r.picture && n.importPictureFromBuffer(t.from(r.picture)), n.save() } function T(t) { var e = t.lastIndexOf("."); return { ext: t.substring(e + 1).toLowerCase(), name: t.substring(0, e) } } }).call(this, r("1c35").Buffer) }, cd49: function (t, e, r) { "use strict"; r.r(e); r("9e1f"), r("450d"); var i = r("6ed5"), n = r.n(i), a = (r("46a1"), r("e5f2")), s = r.n(a), o = (r("6b30"), r("c284")), c = r.n(o), l = (r("0c67"), r("299c")), u = r.n(l), d = (r("b5d8"), r("f494")), m = r.n(d), f = (r("560b"), r("dcdc")), b = r.n(f), h = (r("f225"), r("89a9")), p = r.n(h), v = (r("f4f9"), r("c2cc")), g = r.n(v), w = (r("7a0f"), r("0f6c")), y = r.n(w), j = (r("aaa5"), r("a578")), O = r.n(j), _ = (r("adec"), r("3d2d")), x = r.n(_), k = (r("bdc7"), r("aa2f")), A = r.n(k), U = (r("de31"), r("c69e")), T = r.n(U), P = (r("5466"), r("ecdf")), E = r.n(P), D = (r("38a0"), r("ad41")), L = r.n(D), S = (r("10cb"), r("f3ad")), F = r.n(S), B = (r("eca7"), r("3787")), R = r.n(B), I = (r("425f"), r("4105")), M = r.n(I), q = (r("a7cc"), r("df33")), C = r.n(q), $ = (r("1951"), r("eedf")), N = r.n($), J = (r("acb6"), r("c673")), W = r.n(J), H = (r("fd71"), r("a447")), G = r.n(H), Q = r("2b0e"), V = function () { var t = this, e = t.$createElement, r = t._self._c || e; return r("el-container", { attrs: { id: "app" } }, [r("el-main", [r("Home")], 1), r("el-footer", { attrs: { id: "app-footer" } }, [r("el-row", [r("a", { attrs: { href: "https://github.com/ix64/unlock-music", target: "_blank" } }, [t._v("音乐解锁")]), t._v("(" + t._s(t.version) + ") ：移除已购音乐的加密保护。 "), r("a", { attrs: { href: "https://github.com/ix64/unlock-music/wiki/使用提示", target: "_blank" } }, [t._v("使用提示")])]), r("el-row", [t._v(" 目前支持 网易云音乐(ncm), QQ音乐(qmc, mflac, mgg), 酷狗音乐(kgm), 虾米音乐(xm), 酷我音乐(.kwm) "), r("a", { attrs: { href: "https://github.com/ix64/unlock-music/blob/master/README.md", target: "_blank" } }, [t._v("更多")]), t._v("。 ")]), r("el-row", [r("span", [t._v("Copyright © 2019 - " + t._s((new Date).getFullYear()) + " MengYX")]), t._v(" 音乐解锁使用 "), r("a", { attrs: { href: "https://github.com/ix64/unlock-music/blob/master/LICENSE", target: "_blank" } }, [t._v("MIT许可协议")]), t._v(" 开放源代码 ")])], 1)], 1) }, K = [], z = r("ab8f"), X = r("af85"), Y = r("9224"), Z = function () { var t = this, e = t.$createElement, r = t._self._c || e; return r("div", [r("file-selector", { on: { error: t.showFail, success: t.showSuccess } }), r("div", { attrs: { id: "app-control" } }, [r("el-row", { staticClass: "mb-3" }, [r("span", [t._v("歌曲命名格式：")]), t._l(t.FilenamePolicies, (function (e) { return r("el-radio", { key: e.key, attrs: { label: e.key }, model: { value: t.filename_policy, callback: function (e) { t.filename_policy = e }, expression: "filename_policy" } }, [t._v(" " + t._s(e.text) + " ")]) }))], 2), r("el-row", [r("edit-dialog", { attrs: { show: t.showEditDialog, picture: t.editing_data.picture, title: t.editing_data.title, artist: t.editing_data.artist, album: t.editing_data.album, albumartist: t.editing_data.albumartist, genre: t.editing_data.genre }, on: { cancel: function (e) { t.showEditDialog = !1 }, ok: t.handleEdit } }), r("config-dialog", { attrs: { show: t.showConfigDialog }, on: { done: function (e) { t.showConfigDialog = !1 } } }), r("el-tooltip", { staticClass: "item", attrs: { effect: "dark", placement: "top" } }, [r("div", { attrs: { slot: "content" }, slot: "content" }, [r("span", [t._v(" 部分解密方案需要设定解密参数。 ")])]), r("el-button", { attrs: { icon: "el-icon-s-tools", plain: "" }, on: { click: function (e) { t.showConfigDialog = !0 } } }, [t._v("解密设定")])], 1), r("el-button", { attrs: { icon: "el-icon-download", plain: "" }, on: { click: t.handleDownloadAll } }, [t._v("下载全部")]), r("el-button", { attrs: { icon: "el-icon-delete", plain: "", type: "danger" }, on: { click: t.handleDeleteAll } }, [t._v("清除全部")]),], 1)], 1), r("audio", { attrs: { autoplay: t.playing_auto, src: t.playing_url, controls: "" } }), r("PreviewTable", { attrs: { policy: t.filename_policy, "table-data": t.tableData }, on: { download: t.saveFile, edit: t.editFile, play: t.changePlaying } })], 1) }, tt = [], et = r("321b"), rt = et["a"], it = r("2877"), nt = Object(it["a"])(rt, Z, tt, !1, null, null, null), at = nt.exports, st = r("97e5"), ot = { name: "app", components: { FileSelector: z["a"], PreviewTable: X["a"], Home: at }, data() { return { version: Y.version } }, created() { this.$nextTick(() => this.finishLoad()) }, methods: { async finishLoad() { const t = document.getElementById("loader-mask"); let e; t && t.remove(); } } }, ct = ot, lt = (r("5c0b"), Object(it["a"])(ct, V, K, !1, null, null, null)), ut = lt.exports, dt = r("9483"); "https:" === window.location.protocol && Object(dt["a"])("service-worker.js", { ready() { console.log("App is being served from cache by a service worker.") }, registered() { console.log("Service worker has been registered.") }, cached() { console.log("Content has been cached for offline use.") }, updatefound() { console.log("New content is downloading.") }, updated() { console.log("New content is available."), window.location.reload() }, offline() { console.log("No internet connection found. App is running in offline mode.") }, error(t) { console.error("Error during service worker registration:", t) } }), Q["default"].use(G.a), Q["default"].use(W.a), Q["default"].use(N.a), Q["default"].use(C.a), Q["default"].use(M.a), Q["default"].use(R.a), Q["default"].use(F.a), Q["default"].use(L.a), Q["default"].use(E.a), Q["default"].use(T.a), Q["default"].use(A.a), Q["default"].use(x.a), Q["default"].use(O.a), Q["default"].use(y.a), Q["default"].use(g.a), Q["default"].use(p.a), Q["default"].use(b.a), Q["default"].use(m.a), Q["default"].use(u.a), Q["default"].use(c.a), Q["default"].prototype.$notify = s.a, Q["default"].prototype.$confirm = n.a.confirm, Q["default"].config.productionTip = !1, new Q["default"]({ render: function (t) { return t(ut) } }).$mount("#app") }, d4ec: function (t, e, r) { "use strict"; var i = function () { var t = this, e = t.$createElement, r = t._self._c || e; return r("el-dialog", { attrs: { title: "音乐标签编辑", visible: t.show, "custom-class": "um-edit-dialog", center: "" }, on: { close: function (e) { return t.cancel() } } }, [r("el-form", { ref: "form", attrs: { "status-icon": "", model: t.form, "label-width": "0" } }, [r("section", [r("el-image", { directives: [{ name: "show", rawName: "v-show", value: !t.editPicture, expression: "!editPicture" }], staticStyle: { width: "100px", height: "100px" }, attrs: { src: t.imgFile.url || t.picture } }, [r("div", { staticClass: "image-slot el-image__error", attrs: { slot: "error" }, slot: "error" }, [t._v("暂无封面")])]), r("el-upload", { directives: [{ name: "show", rawName: "v-show", value: t.editPicture, expression: "editPicture" }], attrs: { "auto-upload": !1, "on-change": t.addFile, "on-remove": t.rmvFile, "show-file-list": !0, limit: 1, "list-type": "picture", action: "", drag: "" } }, [r("i", { staticClass: "el-icon-upload" }), r("div", { staticClass: "el-upload__text" }, [t._v("将新图片拖到此处，或"), r("em", [t._v("点击选择")]), r("br"), t._v("以替换自动匹配的图片")]), r("div", { staticClass: "el-upload__tip", attrs: { slot: "tip" }, slot: "tip" }, [t._v(" 新拖到此处的图片将覆盖原始图片 ")])]), r("i", { class: { "el-icon-edit": !t.editPicture, "el-icon-check": t.editPicture }, on: { click: t.changeCover } }), r("br"), t._v(" 标题: "), r("span", { directives: [{ name: "show", rawName: "v-show", value: !t.editTitle, expression: "!editTitle" }] }, [t._v(t._s(t.title))]), r("el-input", { directives: [{ name: "show", rawName: "v-show", value: t.editTitle, expression: "editTitle" }], model: { value: t.title, callback: function (e) { t.title = e }, expression: "title" } }), r("i", { class: { "el-icon-edit": !t.editTitle, "el-icon-check": t.editTitle }, on: { click: function (e) { t.editTitle = !t.editTitle } } }), r("br"), t._v(" 艺术家: "), r("span", { directives: [{ name: "show", rawName: "v-show", value: !t.editArtist, expression: "!editArtist" }] }, [t._v(t._s(t.artist))]), r("el-input", { directives: [{ name: "show", rawName: "v-show", value: t.editArtist, expression: "editArtist" }], model: { value: t.artist, callback: function (e) { t.artist = e }, expression: "artist" } }), r("i", { class: { "el-icon-edit": !t.editArtist, "el-icon-check": t.editArtist }, on: { click: function (e) { t.editArtist = !t.editArtist } } }), r("br"), t._v(" 专辑: "), r("span", { directives: [{ name: "show", rawName: "v-show", value: !t.editAlbum, expression: "!editAlbum" }] }, [t._v(t._s(t.album))]), r("el-input", { directives: [{ name: "show", rawName: "v-show", value: t.editAlbum, expression: "editAlbum" }], model: { value: t.album, callback: function (e) { t.album = e }, expression: "album" } }), r("i", { class: { "el-icon-edit": !t.editAlbum, "el-icon-check": t.editAlbum }, on: { click: function (e) { t.editAlbum = !t.editAlbum } } }), r("br"), t._v(" 专辑艺术家: "), r("span", { directives: [{ name: "show", rawName: "v-show", value: !t.editAlbumartist, expression: "!editAlbumartist" }] }, [t._v(t._s(t.albumartist))]), r("el-input", { directives: [{ name: "show", rawName: "v-show", value: t.editAlbumartist, expression: "editAlbumartist" }], model: { value: t.albumartist, callback: function (e) { t.albumartist = e }, expression: "albumartist" } }), r("i", { class: { "el-icon-edit": !t.editAlbumartist, "el-icon-check": t.editAlbumartist }, on: { click: function (e) { t.editAlbumartist = !t.editAlbumartist } } }), r("br"), t._v(" 风格: "), r("span", { directives: [{ name: "show", rawName: "v-show", value: !t.editGenre, expression: "!editGenre" }] }, [t._v(t._s(t.genre))]), r("el-input", { directives: [{ name: "show", rawName: "v-show", value: t.editGenre, expression: "editGenre" }], model: { value: t.genre, callback: function (e) { t.genre = e }, expression: "genre" } }), r("i", { class: { "el-icon-edit": !t.editGenre, "el-icon-check": t.editGenre }, on: { click: function (e) { t.editGenre = !t.editGenre } } }), r("br"), r("p", { staticClass: "item-desc" }, [t._v(" 为了节省您设备的资源，请在确定前充分检查，避免反复修改。"), r("br"), t._v(" 直接关闭此对话框不会保留所作的更改。 ")])], 1)]), r("span", { staticClass: "dialog-footer", attrs: { slot: "footer" }, slot: "footer" }, [r("el-button", { attrs: { type: "primary" }, on: { click: function (e) { return t.emitConfirm() } } }, [t._v("确 定")])], 1)], 1) }, n = [], a = r("77b3"), s = { components: { Ruby: a["a"] }, props: { show: { type: Boolean, required: !0 }, picture: { type: void 0 | String, required: !0 }, title: { type: void 0 | String, required: !0 }, artist: { type: void 0 | String, required: !0 }, album: { type: void 0 | String, required: !0 }, albumartist: { type: void 0 | String, required: !0 }, genre: { type: void 0 | String, required: !0 } }, data() { return { form: {}, imgFile: { tmpblob: void 0, blob: void 0, url: void 0 }, editPicture: !1, editTitle: !1, editArtist: !1, editAlbum: !1, editAlbumartist: !1, editGenre: !1 } }, async mounted() { this.refreshForm() }, methods: { addFile(t) { this.imgFile.tmpblob = t.raw }, rmvFile() { this.imgFile.tmpblob = void 0 }, changeCover() { this.editPicture = !this.editPicture, !this.editPicture && this.imgFile.tmpblob && (this.imgFile.blob = this.imgFile.tmpblob, this.imgFile.url && URL.revokeObjectURL(this.imgFile.url), this.imgFile.url = URL.createObjectURL(this.imgFile.blob)) }, async refreshForm() { this.imgFile.url && URL.revokeObjectURL(this.imgFile.url), this.imgFile = { tmpblob: void 0, blob: void 0, url: void 0 }, this.editPicture = !1, this.editTitle = !1, this.editArtist = !1, this.editAlbum = !1, this.editAlbumartist = !1, this.editGenre = !1 }, async cancel() { this.refreshForm(), this.$emit("cancel") }, async emitConfirm() { this.editPicture && this.changeCover(), this.imgFile.url && URL.revokeObjectURL(this.imgFile.url), this.$emit("ok", { picture: this.imgFile.blob, title: this.title, artist: this.artist, album: this.album, albumartist: this.albumartist, genre: this.genre }) } } }, o = s, c = (r("1708"), r("2877")), l = Object(c["a"])(o, i, n, !1, null, "b553147e", null); e["a"] = l.exports }, efc0: function (t, e, r) { "use strict"; var i = r("9ab4"), n = r("675e"), a = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.values = new Map, e } return Object(i["b"])(e, t), e.prototype.load = function (t, e) { return Object(i["a"])(this, void 0, Promise, (function () { return Object(i["c"])(this, (function (r) { return this.values.has(t) ? [2, this.values.get(t)] : [2, e] })) })) }, e.prototype.save = function (t, e) { return Object(i["a"])(this, void 0, Promise, (function () { return Object(i["c"])(this, (function (r) { return this.values.set(t, e), [2] })) })) }, e.prototype.getAll = function () { return Object(i["a"])(this, void 0, Promise, (function () { var t; return Object(i["c"])(this, (function (e) { return t = {}, this.values.forEach((function (e, r) { var i; Object.assign(t, (i = {}, i[r] = e, i)) })), [2, t] })) })) }, e.prototype.setAll = function (t) { return Object(i["a"])(this, void 0, Promise, (function () { var e, r, n, a, s; return Object(i["c"])(this, (function (i) { for (e = 0, r = Object.entries(t); e < r.length; e++)n = r[e], a = n[0], s = n[1], this.values.set(a, s); return [2] })) })) }, e }(n["b"]); e["a"] = a } });